(()=>{"use strict";var t=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};let e={};function n(n){return t(this,void 0,void 0,(function*(){e=yield function(e){return t(this,void 0,void 0,(function*(){try{const t=yield fetch(`/static/localization/locales/${e}.json`);if(!t.ok)throw new Error(`failed to load translations for ${e}`);return t.json()}catch(t){return console.error("error loading translations:",t),{}}}))}(n)}))}function o(n){return t(this,void 0,void 0,(function*(){return e[n]?e[n]:(console.warn(`translation key ${n} not found`),n)}))}class i{constructor(t){const e=document.getElementById(t);if(!e)throw new Error(`container with id ${t} not found`);const n=document.createElement("div");n.id="main-root-header",e.appendChild(n);const o=document.createElement("div");o.id="main-root-content",e.appendChild(o);const i=document.createElement("div");i.id="main-root-footer",e.appendChild(i)}}const r="main-root-content";var a=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};class c{constructor(t,e,n){const o=document.getElementById(t);if(!o)throw new Error(`container with id ${t} not found`);this.titleHeading=document.createElement("h1"),o.append(this.titleHeading),this.createLobbyButton=document.createElement("button"),this.createLobbyButton.id="create-lobby-btn",o.append(this.createLobbyButton),this.joinLobbyButton=document.createElement("button"),this.joinLobbyButton.id="join-lobby-btn",o.append(this.joinLobbyButton),this.onCreateLobby=e,this.onJoinLobby=n,this.renderLocalizedTexts(),this.createLobbyButton.addEventListener("click",(()=>{this.onCreateLobby()})),this.joinLobbyButton.addEventListener("click",(()=>{this.onJoinLobby()}))}renderLocalizedTexts(){return a(this,void 0,void 0,(function*(){this.titleHeading.textContent=yield o("Welcome"),this.createLobbyButton.textContent=yield o("Create Lobby"),this.joinLobbyButton.textContent=yield o("Join Lobby")}))}}var s=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};class u{constructor(t,e){if(this.container=document.getElementById(t),!this.container)throw new Error(`container with id ${t} not found`);this.container.innerHTML="",this.titleHeading=document.createElement("h1"),this.container.append(this.titleHeading),this.playerNameInput=document.createElement("input"),this.container.appendChild(this.playerNameInput),this.createButton=document.createElement("button"),this.container.appendChild(this.createButton),this.onCreate=e,this.renderLocalizedTexts(),this.createButton.addEventListener("click",(()=>{const t=this.playerNameInput.value;t?(this.onCreate(t),this.playerNameInput.value=""):this.showAlert(o("Please enter a player name"))}))}showAlert(t){return s(this,void 0,void 0,(function*(){try{const e=yield t;alert(e)}catch(t){console.error("Error getting text:",t),alert("An error occurred.")}}))}renderLocalizedTexts(){return s(this,void 0,void 0,(function*(){this.titleHeading.textContent=yield o("Create Lobby"),this.playerNameInput.placeholder=yield o("Enter player name"),this.createButton.textContent=yield o("Create")}))}}var d=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};class l{constructor(t,e,n){if(this.container=document.getElementById(t),!this.container)throw new Error(`container with id ${t} not found`);this.container.innerHTML="",this.titleHeading=document.createElement("h1"),this.container.append(this.titleHeading),this.player1Input=document.createElement("input"),this.container.append(this.player1Input),this.player2Input=document.createElement("input"),this.container.append(this.player2Input),this.createGameButton=document.createElement("button"),this.container.append(this.createGameButton),this.lobbyId=e,this.onCreateGame=n,this.renderLocalizedTexts(),this.createGameButton.addEventListener("click",(()=>{const t=this.player1Input.value,e=this.player2Input.value;t&&e?t==e?this.showAlert(o("Player name should not be the same")):this.onCreateGame(t,e):this.showAlert(o("Two players are needed"))}))}showAlert(t){return d(this,void 0,void 0,(function*(){try{const e=yield t;alert(e)}catch(t){console.error("Error getting text:",t),alert("An unknown error occured")}}))}renderLocalizedTexts(){return d(this,void 0,void 0,(function*(){this.titleHeading.textContent=`${yield o("Lobby")} ${this.lobbyId}`,this.player1Input.placeholder=yield o("Enter player 1"),this.player2Input.placeholder=yield o("Enter player 2"),this.createGameButton.textContent=yield o("Create game")}))}}var h=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};class y{constructor(t,e){if(this.container=document.getElementById(t),!this.container)throw new Error(`container with id ${t} not found`);this.container.innerHTML="",this.titleHeading=document.createElement("h1"),this.container.appendChild(this.titleHeading),this.gameId=e,this.renderLocalizedTexts()}renderLocalizedTexts(){return h(this,void 0,void 0,(function*(){this.titleHeading.textContent=yield o("Game")}))}}function p(t){return new l(r,t,((t,e)=>{!function(t){new y(r,t)}("1")}))}function f(){return new u(r,(t=>{p("1")}))}var m=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};!function(){m(this,void 0,void 0,(function*(){yield n("fil"),new i("main-root"),new c(r,f,f)}))}()})();